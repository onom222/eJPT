demo enum users&group-windows
1) pingを使ってターゲットマシンが稼働しているかを確認する。
2) nmap -sV targetを使用してターゲットマシンにセキュリティホールがあるかを確認する。
3) searchsploit サービス名でサービスに対してローカル脆弱性があるかを確認する
4) service postgresql start && msfconsoleを起動して、3)で見つけた脆弱性を攻撃する
5) search 突きたい脆弱性
6) use モジュール名
7) show optionsで設定情報の確認
8) setで設定情報をセット
9) exploitでmeterpreterを奪う。
10) getuidコマンドでターゲットシステムでのユーザ名と権限レベルを出力する
11) getprivsコマンドを実行して、現在のユーザーが持つ権限を列挙する。
12) 列挙すべきもう１つの重要な情報は、現在のログインしているユーザーのリストを確認することだが、これを行うためには、meterpreterをbackgroundにする
13) use post/windows/gather/enum_logged_on_usersを使用してモジュールをロードする
14) set SESSION IDでセッションIDを設定する
15) runでモジュールを実行する
＃これを実行することによって対象システムに現在ログオンしているユーザと過去にログオンしていたユーザーを表示する
＃この情報から対象システムを現在使用している他のユーザーがいるかどうかまた、他のユーザがどのようなアプリケーションに頻繁にログオンしているかを把握できる
16) sessions IDでセッションに移動する
17) shellコマンドを使って、シェルセッションを生成する
18) whoamiを実行して、現在のユーザーとこのユーザーが持つ権限を列挙する
19) whoami /priv
20) net usersを実行して、システム上のユーザーアカウントのリストを取得する
21) net user administratorを実行して、管理者アカウントの詳細を確認する
22) net localgroupを実行して、システム上のグループを列挙する
23) net localgroup administratorsでグループのユーザーメンバーの詳細を表示する
