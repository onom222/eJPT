エクスプロイトの探索
公開されている利用可能なexploitの探索
・ターゲットまたはターゲット上で実行されているサービス内に潜在的な脆弱性を特定した後、次の論理的なステップは、その脆弱性を悪用できる
エクスプロイトコードを探索することである。
・エクスプロイトコードはオンラインで簡単に見つかりますがターゲットに対してそれをダウンロードして実行することは非常に危険である点に注意する必要がある
したがってエクスプロイトコードが意図した通りに動作することを確認するために、コードを慎重に分析することが推奨される
・オンラインでエクスプロイトを検索する際に使用すべき、正当かつ精査済みのエクスプロイトデータベースは以下の２つである
1) Exploit-DB
2) Rapid7

Searchsploitでエクスプロイトを探す
・オンラインが使えないことも考慮するために、オフラインでもエクスプロイトソースを使用できるようにしておく必要がある
・Exploit-DBのオフラインデータベースは、Searchsploitというツールを使用してアクセスおよび検索することができる
・exploitのオプション
1) -u：Exploit databaseのローカルデータを更新する。
2) -e：正規表現検索
3) -t：タイトルのみを表示
4) -m：exploitをカレントディレクトリにコピー

エクスプロイトの修正
エクスプロイトの修正
・公開されているエクスプロイトコードは要件に応じて変更する必要がある

・demo 公開されているエクスプロイトを見つけて、エクスプロイトの修正/変更して意図した通りに動作させる
1) ping -c 4 targetIP
2) nmap -sV targetIP
3) searchsploitを使ってエクスプロイトを検索する。
4) searchspoit -mでエクスプロイトを作業ディレクトリにコピーする。
5) 作業環境やターゲットの構成に応じて、エクスプロイトを変更する
vim copy_exploit
→エクスプロイトによっては、ローカルIPやローカルポートを変更できる
6) 変更したコードが正しく動作できるかどうかを確認するために以下のコードを実行する
cp /usr/share/windows-resources/binaries/nc.exe /root/Desktop/
python -m SimpleHTTPServer port_num
7) 新しいウィンドウを開いて、ポートをリスナーする
nc -nvlp port_num
8) 最初にエクスプロイトをコピーしたディレクトリに移動して、以下のコマンドを実行する
python ファイル名 targetIP port_num

クロスコンパイル
・エクスプロイトコードがC/C++/C#で開発されていることがある。
その結果、エクスプロイトコードをPE形式またはバイナリ形式にコンパイルする必要がある
・クロスコンパイルとは、コードをコンパイルしている環境とは異なるプラットフォーム向けにコードをコンパイルするプロセスのこと
